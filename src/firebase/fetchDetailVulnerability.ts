import { doc, getDoc } from "firebase/firestore";
import db from "./firebaseClient";

/**
 * @description 주어진 ID와 일치하는 Firestore의 vulnerability 컬렉션에서 문서를 가져오는 함수
 * @param {string} id - 가져올 문서의 ID
 * @returns {Promise<Object | null>} 문서 데이터를 반환하거나 문서가 없으면 null 반환
 */
async function fetchDetailVulnerability(id: string) {
  // 'vulnerability' 컬렉션에서 주어진 ID와 일치하는 문서 참조 생성
  const docRef = doc(db, "vulnerability", id);

  // Firestore에서 문서 데이터를 가져옴
  const docSnap = await getDoc(docRef);

  // 문서가 존재하지 않을 경우 처리
  if (!docSnap.exists()) {
    console.log("document를 찾을 수 없습니다!");
    return null;
  } else {
    return docSnap.data();
  }
}

export default fetchDetailVulnerability;
